@startuml

' Candidate represents a user applying to jobs.
class Candidate {
  + id: int
  + name: string
  + email: string
  + phone: string
}

' Company offers many JobOffers.
class Company {
  + id: int
  + name: string
  + industry: string
  + location: string
  + github: string
  + website: string
  + job_search_website: string
  + description: text
}

' Role defines the position for a JobOffer.
class Role {
  + id: int
  + name: string
  + description: text
}

' JobOffer belongs to one Company and is associated with one Role.
class JobOffer {
  + id: int
  + title: string
  + description: text
  + skills_required: string
  + experience: string
  + location: string
  + relocation: boolean
  + apply_from_anywhere: boolean
  + remote: RemoteType
  + english_level: EnglishType
  + japanese_level: JapaneseType
  + salary: decimal
  + employment_type: EmploymentType
  + posted_at: datetime
  + closing_date: datetime
  + company_id: int
  + role_id: int
}

' Resume represents one of the candidate's CVs.
class Resume {
  + id: int
  + candidate_id: int
  + title: string
  + latex_source: text
  + pdf_path: string
  + resume_type: ResumeType
}

' CoverLetter represents a cover letter a candidate can create.
class CoverLetter {
  + id: int
  + candidate_id: int
  + subject: string
  + latex_source: text
  + pdf_path: string
}

' JobApplication links a candidate (with a Resume and an optional CoverLetter) to a JobOffer.
class JobApplication {
  + id: int
  + candidate_id: int
  + job_offer_id: int
  + resume_id: int
  + cover_letter_id: int   ' This field is optional; job application may have no cover letter.
  + status: string
  + phase: string
  + mail: string
  + applied_at: datetime
  + feedback: text
}

' Interview is scheduled for a JobApplication.
class Interview {
  + id: int
  + job_application_id: int
  + scheduled_date: datetime
  + result: string
  + mode: InterviewMode
  + interview_type: InterviewType
  + notes: text
}

' Enum definitions
enum RemoteType {
  NO
  PARTIAL
  FULL
}

enum EnglishType {
  BASIC
  INTERMEDIATE
  ADVANCED
}

enum JapaneseType {
  N5
  N4
  N3
  N2
  N1
  BUSINESS_LEVEL
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACT
  TEMPORARY
  INTERN
}

enum ResumeType {
  DEVELOPER
  DESIGNER
  MANAGER
  ANALYST
}

enum InterviewMode {
  IN_PERSON
  VIDEO
  PHONE
}

enum InterviewType {
  TECHNICAL
  HR
  FINAL
}

' Define relationships
Candidate "1" -- "0..*" Resume : owns
Candidate "1" -- "0..*" CoverLetter : creates
Candidate "1" -- "0..*" JobApplication : applies

Company "1" -- "0..*" JobOffer : offers

JobOffer "1" -- "1" Role : is_for
JobOffer "1" -- "0..*" JobApplication : receives

JobApplication "1" -- "1" Resume : uses
JobApplication "0..1" -- "1" CoverLetter : includes
JobApplication "1" -- "0..*" Interview : triggers

@enduml
